<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mais ou Menos Masterclass v3</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Poppins:wght@700;900&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'], display: ['Poppins', 'sans-serif'] },
                    animation: { 
                        fadeIn: 'fadeIn 0.5s ease-out forwards',
                        pop: 'pop 0.3s ease-out forwards',
                    },
                    keyframes: {
                        fadeIn: { '0%': { opacity: '0', transform: 'translateY(10px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } },
                        pop: { '0%': { transform: 'scale(0.9)' }, '50%': { transform: 'scale(1.05)' }, '100%': { transform: 'scale(1)' } },
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-black text-white min-h-screen selection:bg-cyan-500 selection:text-black">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- DATA: 15+ SCENARIOS (THE FIX) ---
        const SCENARIOS = [
            {
                id: 1,
                context: "Food Quality (Positive Surprise)",
                mistake: "The pizza was more or less.",
                correction: "The pizza was quite good.",
                explanation: "Use 'Quite' when something is better than you expected.",
                association: "üß† Memory Hook: Quite = 'At√© que...' (Surpresa Boa)"
            },
            {
                id: 2,
                context: "Feeling Tired",
                mistake: "I am more or less tired.",
                correction: "I am kind of tired.",
                explanation: "For feelings, 'more or less' sounds robotic. Use 'Kind of' to soften it.",
                association: "üß† Memory Hook: Kind of = 'Meio que...' (Suavizar)"
            },
            {
                id: 3,
                context: "Time / Schedule",
                mistake: "I'll arrive more or less at 8.",
                correction: "I'll arrive about 8.",
                explanation: "For numbers and time, 'About' is the standard approximation.",
                association: "üß† Memory Hook: About = Matem√°tica/N√∫meros"
            },
            {
                id: 4,
                context: "Professional / Formal Bad News",
                mistake: "The results are so-so.",
                correction: "The results are somewhat disappointing.",
                explanation: "'Somewhat' is the professional version of 'Kind of'. Use it in emails.",
                association: "üß† Memory Hook: Somewhat = Terno e Gravata (Formal)"
            },
            {
                id: 5,
                context: "Greeting (How are you?)",
                mistake: "I am so-so.",
                correction: "I'm not bad / I'm okay.",
                explanation: "Native speakers don't say 'so-so' about themselves. 'Not bad' is the natural neutral.",
                association: "üß† Memory Hook: Not bad = O 'Mais ou Menos' da vida real"
            },
            {
                id: 6,
                context: "Distance",
                mistake: "It is more or less 10km.",
                correction: "It is about 10km.",
                explanation: "Distance is a number/quantity. Use 'About'.",
                association: "üß† Memory Hook: About = GPS (Dist√¢ncia/Tempo)"
            },
            {
                id: 7,
                context: "Weather (Cold/Hot)",
                mistake: "It is more or less cold.",
                correction: "It is kind of cold.",
                explanation: "Cold is a feeling/sensation. Use 'Kind of' or 'Sort of'.",
                association: "üß† Memory Hook: Kind of = Sensa√ß√£o"
            },
            {
                id: 8,
                context: "Price / Cost",
                mistake: "It costs more or less $50.",
                correction: "It costs about $50.",
                explanation: "Money is a number. Use 'About'.",
                association: "üß† Memory Hook: About = Dinheiro"
            },
            {
                id: 9,
                context: "Movie/Book Opinion",
                mistake: "The book was so-so.",
                correction: "The book was okay / sort of boring.",
                explanation: "If it was average, say 'Okay'. If it was a little boring, say 'Sort of boring'.",
                association: "üß† Memory Hook: Sort of = 'Meio...'"
            },
            {
                id: 10,
                context: "Availability (Busy)",
                mistake: "I am more or less busy.",
                correction: "I am kind of busy.",
                explanation: "You are softening the rejection. 'Kind of' is polite.",
                association: "üß† Memory Hook: Kind of = Educa√ß√£o (N√£o ser grosso)"
            },
            {
                id: 11,
                context: "Age",
                mistake: "He is more or less 40.",
                correction: "He is about 40.",
                explanation: "Age is a number. Use 'About'.",
                association: "üß† Memory Hook: About = Idade"
            },
            {
                id: 12,
                context: "Understanding a Topic",
                mistake: "I understand more or less.",
                correction: "I sort of understand.",
                explanation: "You understand 'parts' of it. 'Sort of' fits perfectly.",
                association: "üß† Memory Hook: Sort of = Mais ou menos (Entendimento)"
            },
            {
                id: 13,
                context: "Project Completion",
                mistake: "It is more or less finished.",
                correction: "It is almost finished / It's about done.",
                explanation: "'More or less finished' is confusing. 'Almost' (quase) is usually what you mean.",
                association: "üß† Memory Hook: Almost = Quase (Melhor que mais ou menos)"
            },
            {
                id: 14,
                context: "Clothing Fit",
                mistake: "The shirt is more or less tight.",
                correction: "The shirt is kind of tight.",
                explanation: "Describing an adjective (tight). Use 'Kind of'.",
                association: "üß† Memory Hook: Kind of = Descri√ß√£o"
            },
            {
                id: 15,
                context: "Agreement",
                mistake: "I agree more or less.",
                correction: "I somewhat agree / I sort of agree.",
                explanation: "You agree with parts of the statement.",
                association: "üß† Memory Hook: Somewhat = Concord√¢ncia Parcial"
            }
        ];

        // --- DATA: DRAG EXERCISES ---
        const DRAG_EXERCISES = [
            { id: 1, words: ["THE", "PIZZA", "WAS", "QUITE", "GOOD"], hint: "A pizza estava at√© que boa." },
            { id: 2, words: ["I", "AM", "KIND", "OF", "TIRED"], hint: "Estou meio cansado." },
            { id: 3, words: ["IT", "IS", "ABOUT", "FIVE", "DOLLARS"], hint: "√â mais ou menos 5 d√≥lares." },
            { id: 4, words: ["THE", "RESULT", "IS", "SOMEWHAT", "POOR"], hint: "O resultado √© um tanto ruim (Formal)." },
            { id: 5, words: ["SHE", "IS", "SORT", "OF", "SHY"], hint: "Ela √© meio t√≠mida." },
            { id: 6, words: ["I", "WILL", "ARRIVE", "ABOUT", "NOON"], hint: "Vou chegar por volta de meio-dia." },
            { id: 7, words: ["IT", "WAS", "QUITE", "A", "SURPRISE"], hint: "Foi uma baita surpresa (at√© que uma surpresa)." },
            { id: 8, words: ["WE", "ARE", "KIND", "OF", "LOST"], hint: "Estamos meio perdidos." },
            { id: 9, words: ["HE", "IS", "ABOUT", "THIRTY", "YEARS", "OLD"], hint: "Ele tem mais ou menos 30 anos." },
            { id: 10, words: ["I", "AM", "NOT", "BAD", "THANKS"], hint: "N√£o estou mal (mais ou menos), obrigado." }
        ];

        // --- COMPONENTS ---

        const TabButton = ({ active, onClick, label }) => (
            <button 
                onClick={onClick}
                className={`px-4 py-2 sm:px-6 sm:py-3 rounded-full font-bold text-xs sm:text-sm transition-all duration-300 border ${active ? 'bg-cyan-500 text-black border-cyan-400 shadow-[0_0_15px_rgba(6,182,212,0.5)]' : 'bg-gray-900 text-gray-400 border-gray-700 hover:border-gray-500'}`}
            >
                {label}
            </button>
        );

        const App = () => {
            const [activeTab, setActiveTab] = useState('fix'); // Default to 'The Fix'

            // --- DRAG STATE ---
            const [dragIndex, setDragIndex] = useState(0);
            const [currentWords, setCurrentWords] = useState([]);
            const [dragFeedback, setDragFeedback] = useState(null);
            const [selectedIdx, setSelectedIdx] = useState(null); // For click-to-swap

            // Initialize Drag Level
            useEffect(() => {
                const original = DRAG_EXERCISES[dragIndex].words;
                // Shuffle logic
                let shuffled = [...original];
                // Ensure it's actually shuffled
                if (shuffled.length > 1) {
                    while (JSON.stringify(shuffled) === JSON.stringify(original)) {
                        shuffled = shuffled.sort(() => Math.random() - 0.5);
                    }
                }
                setCurrentWords(shuffled);
                setDragFeedback(null);
                setSelectedIdx(null);
            }, [dragIndex]);

            // --- DRAG HANDLERS (FIXED) ---

            // 1. Handle Drag Start
            const handleDragStart = (e, index) => {
                e.dataTransfer.setData("text/plain", index);
                e.dataTransfer.effectAllowed = "move";
            };

            // 2. Handle Drop (Swap Logic)
            const handleDrop = (e, targetIndex) => {
                e.preventDefault();
                const sourceIndex = parseInt(e.dataTransfer.getData("text/plain"));

                if (sourceIndex === targetIndex) return;

                const newWords = [...currentWords];
                const temp = newWords[targetIndex];
                newWords[targetIndex] = newWords[sourceIndex];
                newWords[sourceIndex] = temp;

                setCurrentWords(newWords);
                checkWin(newWords);
            };

            // 3. Handle Click (Mobile Swap Logic)
            const handleClick = (index) => {
                if (selectedIdx === null) {
                    // Select first item
                    setSelectedIdx(index);
                } else if (selectedIdx === index) {
                    // Deselect
                    setSelectedIdx(null);
                } else {
                    // Swap
                    const newWords = [...currentWords];
                    const temp = newWords[index];
                    newWords[index] = newWords[selectedIdx];
                    newWords[selectedIdx] = temp;

                    setCurrentWords(newWords);
                    setSelectedIdx(null);
                    checkWin(newWords);
                }
            };

            const checkWin = (words) => {
                const target = DRAG_EXERCISES[dragIndex].words.join(" ");
                const current = words.join(" ");
                if (target === current) {
                    setDragFeedback("CORRECT! üéâ");
                }
            };

            const nextLevel = () => {
                if (dragIndex < DRAG_EXERCISES.length - 1) {
                    setDragIndex(prev => prev + 1);
                } else {
                    setDragIndex(0); // Loop back
                }
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900 text-white font-sans pb-20">

                    {/* HEADER */}
                    <header className="p-6 text-center border-b border-gray-800 bg-gray-900/50 backdrop-blur-md sticky top-0 z-50">
                        <h1 className="text-3xl md:text-5xl font-extrabold tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-fuchsia-500 font-display">
                            MAIS OU MENOS <span className="text-white">MASTERCLASS</span>
                        </h1>
                    </header>

                    {/* NAVIGATION */}
                    <nav className="flex justify-center gap-3 p-6 flex-wrap">
                        <TabButton label="üõ†Ô∏è THE FIX (15 Scenarios)" active={activeTab === 'fix'} onClick={() => setActiveTab('fix')} />
                        <TabButton label="üß± REORDER (Drag & Drop)" active={activeTab === 'drag'} onClick={() => setActiveTab('drag')} />
                    </nav>

                    {/* MAIN CONTENT */}
                    <main className="max-w-4xl mx-auto px-4">

                        {/* --- TAB: THE FIX --- */}
                        {activeTab === 'fix' && (
                            <div className="space-y-8 animate-fadeIn">
                                <div className="text-center mb-8">
                                    <h2 className="text-2xl font-bold text-white">Walkthrough Scenarios</h2>
                                    <p className="text-gray-400">See exactly what you <span className="text-red-400 font-bold">CAN'T</span> use and what is <span className="text-lime-400 font-bold">PREFERRED</span>.</p>
                                </div>

                                <div className="grid gap-6">
                                    {SCENARIOS.map((scenario) => (
                                        <div key={scenario.id} className="bg-gray-800 rounded-2xl overflow-hidden border border-gray-700 shadow-xl hover:border-cyan-500/30 transition-all">
                                            {/* Header */}
                                            <div className="bg-gray-900/80 p-4 border-b border-gray-700 flex items-center justify-between">
                                                <h3 className="font-bold text-lg text-gray-100">{scenario.context}</h3>
                                                <span className="text-xs font-bold bg-gray-700 text-gray-300 px-2 py-1 rounded">#{scenario.id}</span>
                                            </div>

                                            <div className="grid md:grid-cols-2">
                                                {/* Mistake */}
                                                <div className="p-6 bg-red-900/5 border-b md:border-b-0 md:border-r border-gray-700 relative">
                                                    <div className="absolute top-3 left-3 text-red-500 font-black text-[10px] tracking-widest uppercase bg-red-900/20 px-2 py-1 rounded">
                                                        ‚ùå Don't Say
                                                    </div>
                                                    <p className="text-lg text-red-300/80 font-medium mt-4 line-through decoration-red-500/50">
                                                        "{scenario.mistake}"
                                                    </p>
                                                </div>

                                                {/* Correction */}
                                                <div className="p-6 bg-lime-900/5 relative">
                                                    <div className="absolute top-3 left-3 text-lime-500 font-black text-[10px] tracking-widest uppercase bg-lime-900/20 px-2 py-1 rounded">
                                                        ‚úÖ Preferred
                                                    </div>
                                                    <p className="text-xl text-lime-300 font-bold mt-4">
                                                        "{scenario.correction}"
                                                    </p>
                                                </div>
                                            </div>

                                            {/* Explanation & Association */}
                                            <div className="p-5 bg-gray-800 border-t border-gray-700 space-y-3">
                                                <p className="text-sm text-gray-300">
                                                    <span className="text-cyan-400 font-bold uppercase text-xs">Why?</span> {scenario.explanation}
                                                </p>
                                                <div className="bg-gray-900/50 p-3 rounded-lg border border-gray-700">
                                                    <p className="text-sm text-fuchsia-300 font-semibold">
                                                        {scenario.association}
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        {/* --- TAB: REORDER (DRAG & DROP) --- */}
                        {activeTab === 'drag' && (
                            <div className="animate-fadeIn max-w-2xl mx-auto mt-8">
                                <div className="text-center mb-10">
                                    <span className="text-cyan-500 font-bold tracking-widest text-xs uppercase bg-cyan-900/20 px-3 py-1 rounded-full">Level {dragIndex + 1} of {DRAG_EXERCISES.length}</span>
                                    <h2 className="text-3xl font-bold mt-4 text-white">Unscramble the Sentence</h2>
                                    <p className="text-gray-400 mt-2 italic text-lg">"{DRAG_EXERCISES[dragIndex].hint}"</p>
                                </div>

                                {/* Drag Area */}
                                <div className="flex flex-wrap justify-center gap-3 mb-10 min-h-[100px]">
                                    {currentWords.map((word, index) => (
                                        <div
                                            key={index}
                                            draggable="true"
                                            onDragStart={(e) => handleDragStart(e, index)}
                                            onDragOver={(e) => e.preventDefault()}
                                            onDrop={(e) => handleDrop(e, index)}
                                            onClick={() => handleClick(index)}
                                            className={`
                                                px-6 py-4 rounded-xl font-bold text-lg shadow-lg cursor-grab active:cursor-grabbing transition-all transform hover:scale-105 select-none
                                                ${selectedIdx === index 
                                                    ? 'bg-fuchsia-600 text-white ring-4 ring-fuchsia-300 scale-110 z-10' 
                                                    : 'bg-gray-800 text-cyan-400 border border-cyan-500/30 hover:bg-gray-700'}
                                            `}
                                        >
                                            {word}
                                        </div>
                                    ))}
                                </div>

                                {/* Feedback Area */}
                                <div className="h-24 flex flex-col items-center justify-center">
                                    {dragFeedback ? (
                                        <div className="animate-pop text-center">
                                            <div className="text-3xl font-bold text-lime-400 mb-4">{dragFeedback}</div>
                                            <button 
                                                onClick={nextLevel}
                                                className="bg-lime-500 hover:bg-lime-400 text-black font-bold py-3 px-8 rounded-full shadow-[0_0_20px_rgba(132,204,22,0.5)] transition-all transform hover:scale-105 flex items-center gap-2"
                                            >
                                                Next Level <span className="text-xl">&rarr;</span>
                                            </button>
                                        </div>
                                    ) : (
                                        <p className="text-gray-500 text-sm animate-pulse">
                                            Drag blocks or click to swap positions
                                        </p>
                                    )}
                                </div>
                            </div>
                        )}

                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
