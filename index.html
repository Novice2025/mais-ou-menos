<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mais ou Menos Masterclass v5 (Final Fix)</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Poppins:wght@700;900&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'], display: ['Poppins', 'sans-serif'] },
                    animation: { 
                        fadeIn: 'fadeIn 0.5s ease-out forwards',
                        pop: 'pop 0.3s ease-out forwards',
                        slideUp: 'slideUp 0.3s ease-out forwards',
                    },
                    keyframes: {
                        fadeIn: { '0%': { opacity: '0', transform: 'translateY(10px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } },
                        pop: { '0%': { transform: 'scale(0.9)' }, '50%': { transform: 'scale(1.05)' }, '100%': { transform: 'scale(1)' } },
                        slideUp: { '0%': { opacity: '0', transform: 'translateY(20px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } },
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-black text-white min-h-screen selection:bg-cyan-500 selection:text-black">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- DATA: 20 SCENARIOS (THE FIX) ---
        const SCENARIOS = [
            { id: 1, context: "Food Quality (Positive Surprise)", mistake: "The pizza was more or less.", correction: "The pizza was quite good.", explanation: "Use 'Quite' when something is better than you expected.", association: "üß† Memory Hook: Quite = 'At√© que...' (Surpresa Boa)" },
            { id: 2, context: "Feelings (Softening)", mistake: "I am more or less tired.", correction: "I am kind of tired.", explanation: "Use 'Kind of' or 'Sort of' to soften a feeling. It means 'Meio que'.", association: "üß† Memory Hook: Kind of = 'Meio que' (Suavizar)" },
            { id: 3, context: "Time & Numbers (Approximation)", mistake: "It takes more or less 2 hours.", correction: "It takes about 2 hours.", explanation: "For numbers, time, and quantity, always use 'About' or 'Around'.", association: "üß† Memory Hook: Numbers = About (Cerca de)" },
            { id: 4, context: "Professional Agreement (Partial)", mistake: "I agree more or less.", correction: "I somewhat agree.", explanation: "In business, 'Somewhat' is professional and polite for partial agreement.", association: "üß† Memory Hook: Somewhat = 'De certa forma' (Formal)" },
            { id: 5, context: "Completion (Status)", mistake: "The project is more or less finished.", correction: "The project is almost finished.", explanation: "If it is near the end, use 'Almost'. 'More or less' sounds like you don't know.", association: "üß† Memory Hook: Almost = 'Quase' (Perto do fim)" },
            { id: 6, context: "Weather (Uncertainty)", mistake: "It is more or less raining.", correction: "It looks like rain.", explanation: "We don't quantify rain. We describe the appearance.", association: "üß† Memory Hook: Looks like = 'Parece que'" },
            { id: 7, context: "Distance (Approximation)", mistake: "It is more or less 10km.", correction: "It is about 10km.", explanation: "Again, for any number or distance, use 'About'.", association: "üß† Memory Hook: Distance = About" },
            { id: 8, context: "Cost (Approximation)", mistake: "It costs more or less $50.", correction: "It costs around $50.", explanation: "For money, 'Around' or 'About' is perfect.", association: "üß† Memory Hook: Money = Around" },
            { id: 9, context: "Understanding (Partial)", mistake: "I understand more or less.", correction: "I sort of understand.", explanation: "Use 'Sort of' to admit you are confused but got the main idea.", association: "üß† Memory Hook: Sort of = 'Mais ou menos' (Confuso)" },
            { id: 10, context: "Health (Not feeling well)", mistake: "I am more or less sick.", correction: "I feel a bit under the weather.", explanation: "Native idiom. 'More or less sick' sounds strange.", association: "üß† Memory Hook: Under the weather = 'Meio mal'" },
            { id: 11, context: "Movies/Books (Opinion)", mistake: "The movie was so-so.", correction: "The movie was okay / average.", explanation: "'So-so' is childish. 'Average' or 'Okay' is adult.", association: "üß† Memory Hook: Average = 'Mediano'" },
            { id: 12, context: "Frequency (Occasional)", mistake: "I go there more or less.", correction: "I go there occasionally.", explanation: "If you mean 'sometimes', use 'Occasionally' or 'Now and then'.", association: "üß† Memory Hook: Occasionally = 'De vez em quando'" },
            { id: 13, context: "Certainty (Unsure)", mistake: "I am more or less sure.", correction: "I am pretty sure.", explanation: "'Pretty sure' means 80-90% sure. 'More or less sure' is confusing.", association: "üß† Memory Hook: Pretty sure = 'Quase certeza'" },
            { id: 14, context: "Difficulty (Moderate)", mistake: "It is more or less hard.", correction: "It is moderately difficult.", explanation: "'Moderately' is the precise word for 'medium difficulty'.", association: "üß† Memory Hook: Moderately = 'Moderadamente'" },
            { id: 15, context: "Traffic (Intensity)", mistake: "There is more or less traffic.", correction: "There is some traffic.", explanation: "We say 'some traffic' (a bit) or 'heavy traffic' (a lot).", association: "üß† Memory Hook: Some traffic = 'Um pouco de tr√¢nsito'" },
            { id: 16, context: "Temperature (Room)", mistake: "The water is more or less warm.", correction: "The water is lukewarm.", explanation: "Specific word for 'nem quente nem frio'.", association: "üß† Memory Hook: Lukewarm = 'Morno'" },
            { id: 17, context: "Clothing (Fit)", mistake: "It fits more or less.", correction: "It fits okay / It's a bit loose.", explanation: "Be specific. Is it big? Small? Okay?", association: "üß† Memory Hook: A bit loose/tight = 'Meio largo/apertado'" },
            { id: 18, context: "Taste (Food)", mistake: "It tastes more or less.", correction: "It tastes bland.", explanation: "If it has no flavor, say 'Bland'.", association: "üß† Memory Hook: Bland = 'Sem gra√ßa'" },
            { id: 19, context: "Relationship (Status)", mistake: "We are more or less friends.", correction: "We are acquaintances.", explanation: "Someone you know but aren't close with.", association: "üß† Memory Hook: Acquaintance = 'Conhecido'" },
            { id: 20, context: "Safety (Risk)", mistake: "It is more or less safe.", correction: "It is relatively safe.", explanation: "Use 'Relatively' when comparing risks.", association: "üß† Memory Hook: Relatively = 'Relativamente'" }
        ];

        // --- DATA: LOGIC ---
        const LOGIC_DATA = [
            { title: "The 'So-So' Trap", content: "If you ask a native speaker 'How are you?' and they say 'So-so', they are probably 5 years old. Adults say: 'I'm okay', 'Not too bad', or 'Getting by'.", color: "text-red-400" },
            { title: "The Mathematical Mistake", content: "In Portuguese, 'Mais ou menos' is a universal tool. In English, 'More or less' is mathematical. 'It is more or less 10km' sounds like a calculation. Use 'About 10km'.", color: "text-yellow-400" },
            { title: "The 'Quite' Solution", content: "When something is 'Mais ou menos' but in a GOOD way (Surpresa boa), use QUITE. 'The movie was quite good' = 'O filme foi at√© que bom'.", color: "text-lime-400" },
            { title: "The 'Kind of' Softener", content: "When you want to soften a negative adjective, use KIND OF. 'I am kind of tired' (Meio cansado). 'It is kind of expensive' (Meio caro).", color: "text-cyan-400" }
        ];

        // --- DATA: REORDER EXERCISES ---
        const DRAG_EXERCISES = [
            { id: 1, hint: "O filme foi at√© que bom (Surpresa boa)", target: ["THE", "MOVIE", "WAS", "QUITE", "GOOD"] },
            { id: 2, hint: "Eu estou meio cansado hoje", target: ["I", "AM", "KIND", "OF", "TIRED", "TODAY"] },
            { id: 3, hint: "Custa cerca de 50 d√≥lares", target: ["IT", "COSTS", "ABOUT", "50", "DOLLARS"] },
            { id: 4, hint: "O projeto est√° quase pronto", target: ["THE", "PROJECT", "IS", "ALMOST", "FINISHED"] },
            { id: 5, hint: "Eu meio que concordo com voc√™", target: ["I", "SORT", "OF", "AGREE", "WITH", "YOU"] }
        ];

        // --- DATA: TRANSLATION EXERCISES ---
        const TRANSLATION_EXERCISES = [
            { pt: "O tempo est√° meio frio hoje.", en: "THE WEATHER IS KIND OF COLD TODAY" },
            { pt: "O resultado foi at√© que impressionante.", en: "THE RESULT WAS QUITE IMPRESSIVE" },
            { pt: "√â cerca de 2 horas daqui.", en: "IT IS ABOUT 2 HOURS FROM HERE" },
            { pt: "Eu estou meio confuso sobre isso.", en: "I AM SORT OF CONFUSED ABOUT THIS" },
            { pt: "O tr√¢nsito est√° meio ruim.", en: "THE TRAFFIC IS RATHER BAD" }
        ];

        // --- DATA: SITUATIONS ---
        const SITUATION_EXERCISES = [
            { context: "You are at a restaurant. The waiter asks how the food was. It was okay, but not amazing.", sentence: "It was _____ good.", options: ["QUITE", "MORE OR LESS", "SO-SO"] },
            { context: "Your boss asks if the report is finished. You need 10 more minutes.", sentence: "It is _____ finished.", options: ["ALMOST", "MORE OR LESS", "ABOUT"] },
            { context: "Someone asks how far the airport is. You think it's 20km.", sentence: "It is _____ 20km.", options: ["ABOUT", "QUITE", "KIND OF"] },
            { context: "You feel a little bit sick, but not terrible.", sentence: "I feel _____ sick.", options: ["KIND OF", "MORE OR LESS", "APPROXIMATELY"] },
            { context: "You agree with an idea, but have some doubts.", sentence: "I _____ agree.", options: ["SOMEWHAT", "MORE OR LESS", "QUITE"] }
        ];

        const App = () => {
            const [activeTab, setActiveTab] = useState('fix'); // fix, logic, reorder, translate, situations

            // --- STATE: REORDER ---
            const [dragIndex, setDragIndex] = useState(0);
            const [currentWords, setCurrentWords] = useState([]);
            const [selectedIdx, setSelectedIdx] = useState(null);
            const [dragFeedback, setDragFeedback] = useState('');

            // --- STATE: TRANSLATE (NEW BANK SYSTEM) ---
            const [transIndex, setTransIndex] = useState(0);
            const [transPool, setTransPool] = useState([]); // Words in the bank
            const [transLine, setTransLine] = useState([]); // Words in the sentence
            const [transFeedback, setTransFeedback] = useState('');

            // --- STATE: SITUATIONS ---
            const [sitIndex, setSitIndex] = useState(0);
            const [sitFeedback, setSitFeedback] = useState('');

            // --- INIT REORDER ---
            useEffect(() => {
                const words = [...DRAG_EXERCISES[dragIndex].target];
                // Shuffle
                for (let i = words.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [words[i], words[j]] = [words[j], words[i]];
                }
                setCurrentWords(words);
                setDragFeedback('');
                setSelectedIdx(null);
            }, [dragIndex]);

            // --- INIT TRANSLATE ---
            useEffect(() => {
                const words = TRANSLATION_EXERCISES[transIndex].en.split(" ");
                // Shuffle
                for (let i = words.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [words[i], words[j]] = [words[j], words[i]];
                }
                setTransPool(words);
                setTransLine([]);
                setTransFeedback('');
            }, [transIndex]);

            // --- HANDLERS: REORDER (SWAP LOGIC) ---
            const handleDragStart = (e, index) => {
                e.dataTransfer.setData('text/plain', index);
                e.dataTransfer.effectAllowed = "move";
            };

            const handleDrop = (e, dropIndex) => {
                e.preventDefault();
                const dragIdx = parseInt(e.dataTransfer.getData('text/plain'));
                if (dragIdx === dropIndex) return;

                const newWords = [...currentWords];
                [newWords[dragIdx], newWords[dropIndex]] = [newWords[dropIndex], newWords[dragIdx]];
                setCurrentWords(newWords);
                checkReorder(newWords);
            };

            const handleClickSwap = (index) => {
                if (selectedIdx === null) {
                    setSelectedIdx(index);
                } else {
                    const newWords = [...currentWords];
                    [newWords[selectedIdx], newWords[index]] = [newWords[index], newWords[selectedIdx]];
                    setCurrentWords(newWords);
                    setSelectedIdx(null);
                    checkReorder(newWords);
                }
            };

            const checkReorder = (words) => {
                if (JSON.stringify(words) === JSON.stringify(DRAG_EXERCISES[dragIndex].target)) {
                    setDragFeedback('PERFECT!');
                }
            };

            // --- HANDLERS: TRANSLATE (BANK TO LINE LOGIC) ---

            // 1. Drag Start (Generic for both Pool and Line)
            const handleTransDragStart = (e, word, origin, index) => {
                // Data: { word, origin ('pool'|'line'), index }
                const data = JSON.stringify({ word, origin, index });
                e.dataTransfer.setData('application/json', data);
                e.dataTransfer.effectAllowed = "move";
            };

            // 2. Drop on LINE (Target)
            const handleDropOnLine = (e) => {
                e.preventDefault();
                const dataRaw = e.dataTransfer.getData('application/json');
                if (!dataRaw) return;
                const { word, origin, index } = JSON.parse(dataRaw);

                if (origin === 'pool') {
                    // Move from Pool to Line
                    const newPool = transPool.filter((_, i) => i !== index);
                    const newLine = [...transLine, word];
                    setTransPool(newPool);
                    setTransLine(newLine);
                    checkTranslate(newLine);
                }
                // If origin is line, we could reorder, but let's keep it simple: just append if dropped on container
            };

            // 3. Drop on POOL (Source - Remove from line)
            const handleDropOnPool = (e) => {
                e.preventDefault();
                const dataRaw = e.dataTransfer.getData('application/json');
                if (!dataRaw) return;
                const { word, origin, index } = JSON.parse(dataRaw);

                if (origin === 'line') {
                    // Move from Line back to Pool
                    const newLine = transLine.filter((_, i) => i !== index);
                    const newPool = [...transPool, word];
                    setTransLine(newLine);
                    setTransPool(newPool);
                }
            };

            // 4. Click Fallback (Move between arrays)
            const handleTransClick = (word, origin, index) => {
                if (origin === 'pool') {
                    const newPool = transPool.filter((_, i) => i !== index);
                    const newLine = [...transLine, word];
                    setTransPool(newPool);
                    setTransLine(newLine);
                    checkTranslate(newLine);
                } else {
                    const newLine = transLine.filter((_, i) => i !== index);
                    const newPool = [...transPool, word];
                    setTransLine(newLine);
                    setTransPool(newPool);
                }
            };

            const checkTranslate = (line) => {
                const target = TRANSLATION_EXERCISES[transIndex].en.split(" ");
                if (line.length === target.length) {
                    if (line.join(" ") === TRANSLATION_EXERCISES[transIndex].en) {
                        setTransFeedback('PERFECT!');
                    } else {
                        // Optional: Feedback for wrong order
                    }
                }
            };

            // --- HANDLERS: SITUATIONS ---
            const handleSituationChoice = (opt) => {
                const correct = SITUATION_EXERCISES[sitIndex].sentence.replace("_____", opt) === SITUATION_EXERCISES[sitIndex].sentence.replace("_____", SITUATION_EXERCISES[sitIndex].options[0]) 
                    ? true // Simplified check logic based on option 0 being correct in data? No, need logic.
                    : false; 

                // Hardcoded correct logic based on context keywords
                let isCorrect = false;
                const s = SITUATION_EXERCISES[sitIndex];
                if (s.context.includes("restaurant") && opt === "QUITE") isCorrect = true;
                if (s.context.includes("10 more minutes") && opt === "ALMOST") isCorrect = true;
                if (s.context.includes("airport") && opt === "ABOUT") isCorrect = true;
                if (s.context.includes("sick") && opt === "KIND OF") isCorrect = true;
                if (s.context.includes("agree") && opt === "SOMEWHAT") isCorrect = true;

                if (isCorrect) {
                    setSitFeedback('CORRECT! ' + opt + ' is the native choice.');
                    setTimeout(() => {
                        if(sitIndex < SITUATION_EXERCISES.length - 1) {
                            setSitIndex(prev => prev + 1);
                            setSitFeedback('');
                        } else {
                            setSitFeedback('ALL DONE! GREAT JOB!');
                        }
                    }, 2000);
                } else {
                    setSitFeedback('TRY AGAIN. That sounds unnatural.');
                }
            };

            return (
                <div className="max-w-4xl mx-auto p-4 pb-20 font-sans">
                    {/* HEADER */}
                    <header className="text-center py-8 border-b border-gray-800 mb-8">
                        <h1 className="text-4xl md:text-6xl font-black tracking-tighter mb-2 bg-gradient-to-r from-cyan-400 to-fuchsia-500 text-transparent bg-clip-text">
                            MAIS OU MENOS
                        </h1>
                        <p className="text-gray-400 text-lg">Stop saying "So-so". Start sounding native.</p>
                    </header>

                    {/* NAVIGATION */}
                    <nav className="flex flex-wrap justify-center gap-2 mb-12">
                        {[
                            { id: 'fix', label: 'üõ†Ô∏è The Fix (20)' },
                            { id: 'logic', label: 'üß† Logic' },
                            { id: 'reorder', label: 'üß± Reorder' },
                            { id: 'translate', label: 'üîÑ Translate' },
                            { id: 'situations', label: 'üé¨ Situations' }
                        ].map(tab => (
                            <button
                                key={tab.id}
                                onClick={() => setActiveTab(tab.id)}
                                className={`px-6 py-3 rounded-full font-bold transition-all transform hover:scale-105 ${
                                    activeTab === tab.id 
                                    ? 'bg-white text-black shadow-[0_0_20px_rgba(255,255,255,0.3)]' 
                                    : 'bg-gray-900 text-gray-400 hover:bg-gray-800'
                                }`}
                            >
                                {tab.label}
                            </button>
                        ))}
                    </nav>

                    {/* CONTENT AREA */}
                    <main className="min-h-[400px]">

                        {/* --- TAB 1: THE FIX (20 SCENARIOS) --- */}
                        {activeTab === 'fix' && (
                            <div className="animate-fadeIn grid grid-cols-1 md:grid-cols-2 gap-6">
                                {SCENARIOS.map((item) => (
                                    <div key={item.id} className="bg-gray-900 rounded-2xl p-6 border border-gray-800 hover:border-cyan-500/50 transition-all group">
                                        <div className="flex justify-between items-start mb-4">
                                            <span className="bg-gray-800 text-gray-400 text-xs font-bold px-2 py-1 rounded uppercase tracking-wider">Scenario {item.id}</span>
                                            <span className="text-cyan-400 text-xs font-bold">{item.context}</span>
                                        </div>

                                        <div className="space-y-3 mb-4">
                                            <div className="flex items-center text-red-400/60 line-through text-sm">
                                                <span className="mr-2">‚ùå</span> {item.mistake}
                                            </div>
                                            <div className="flex items-center text-lime-400 font-bold text-lg">
                                                <span className="mr-2">‚úÖ</span> {item.correction}
                                            </div>
                                        </div>

                                        <div className="bg-black/30 p-3 rounded-lg border-l-2 border-cyan-500 mb-2">
                                            <p className="text-gray-300 text-sm italic">{item.explanation}</p>
                                        </div>
                                        <div className="text-fuchsia-400 text-xs font-bold mt-2 opacity-80 group-hover:opacity-100 transition-opacity">
                                            {item.association}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}

                        {/* --- TAB 2: LOGIC --- */}
                        {activeTab === 'logic' && (
                            <div className="animate-fadeIn max-w-2xl mx-auto">
                                <h2 className="text-3xl font-bold text-center mb-8">The Logic Behind It</h2>
                                <div className="space-y-4">
                                    {LOGIC_DATA.map((item, idx) => (
                                        <div key={idx} className="bg-gray-900 p-6 rounded-xl border border-gray-800 hover:border-gray-600 transition-all">
                                            <h3 className={`text-xl font-bold mb-2 ${item.color}`}>{item.title}</h3>
                                            <p className="text-gray-300 leading-relaxed">{item.content}</p>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        {/* --- TAB 3: REORDER (SWAP) --- */}
                        {activeTab === 'reorder' && (
                            <div className="animate-fadeIn max-w-2xl mx-auto text-center">
                                <span className="text-cyan-500 font-bold text-xs uppercase bg-cyan-900/20 px-3 py-1 rounded-full">Level {dragIndex + 1}/5</span>
                                <h2 className="text-2xl font-bold mt-4 mb-2">Unscramble</h2>
                                <p className="text-gray-400 italic mb-8">"{DRAG_EXERCISES[dragIndex].hint}"</p>

                                <div className="flex flex-wrap justify-center gap-3 mb-8">
                                    {currentWords.map((word, index) => (
                                        <div
                                            key={index}
                                            draggable="true"
                                            onDragStart={(e) => handleDragStart(e, index)}
                                            onDragOver={(e) => e.preventDefault()}
                                            onDrop={(e) => handleDrop(e, index)}
                                            onClick={() => handleClickSwap(index)}
                                            className={`
                                                px-5 py-3 rounded-lg font-bold text-lg cursor-pointer transition-all select-none
                                                ${selectedIdx === index 
                                                    ? 'bg-fuchsia-600 text-white scale-110 ring-2 ring-fuchsia-300' 
                                                    : 'bg-gray-800 text-cyan-400 border border-cyan-500/30 hover:bg-gray-700'}
                                            `}
                                        >
                                            {word}
                                        </div>
                                    ))}
                                </div>

                                {dragFeedback && (
                                    <div className="animate-pop">
                                        <div className="text-2xl font-bold text-lime-400 mb-4">{dragFeedback}</div>
                                        <button 
                                            onClick={() => {
                                                if(dragIndex < DRAG_EXERCISES.length -1) setDragIndex(prev => prev + 1);
                                                else setDragIndex(0);
                                            }}
                                            className="bg-lime-500 text-black font-bold py-2 px-6 rounded-full hover:bg-lime-400"
                                        >
                                            Next Level &rarr;
                                        </button>
                                    </div>
                                )}
                                {!dragFeedback && <p className="text-xs text-gray-500">Drag blocks or click two blocks to swap.</p>}
                            </div>
                        )}

                        {/* --- TAB 4: TRANSLATE (FIXED: BANK TO LINE) --- */}
                        {activeTab === 'translate' && (
                            <div className="animate-fadeIn max-w-2xl mx-auto text-center">
                                <span className="text-fuchsia-500 font-bold text-xs uppercase bg-fuchsia-900/20 px-3 py-1 rounded-full">Exercise {transIndex + 1}/5</span>
                                <h2 className="text-2xl font-bold mt-4 mb-2">Translate to English</h2>
                                <div className="bg-gray-800 inline-block px-6 py-3 rounded-xl border border-gray-700 mb-8">
                                    <p className="text-lg text-white">"{TRANSLATION_EXERCISES[transIndex].pt}"</p>
                                </div>

                                {/* THE LINE (Target) */}
                                <div 
                                    onDragOver={(e) => e.preventDefault()}
                                    onDrop={handleDropOnLine}
                                    className={`min-h-[100px] border-2 border-dashed border-gray-700 rounded-xl mb-8 flex flex-wrap gap-2 justify-center items-center p-4 transition-all ${transLine.length === 0 ? 'bg-gray-900/30' : 'bg-gray-900'}`}
                                >
                                    {transLine.length === 0 && <span className="text-gray-600 italic text-sm pointer-events-none">Drag words here or click them below...</span>}
                                    {transLine.map((word, idx) => (
                                        <div 
                                            key={idx}
                                            draggable="true"
                                            onDragStart={(e) => handleTransDragStart(e, word, 'line', idx)}
                                            onClick={() => handleTransClick(word, 'line', idx)}
                                            className="bg-fuchsia-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg font-bold shadow-lg animate-slideUp cursor-grab active:cursor-grabbing"
                                        >
                                            {word}
                                        </div>
                                    ))}
                                </div>

                                {/* THE BANK (Source) */}
                                <div 
                                    onDragOver={(e) => e.preventDefault()}
                                    onDrop={handleDropOnPool}
                                    className="flex flex-wrap gap-3 justify-center mb-8 min-h-[60px]"
                                >
                                    {transPool.map((word, idx) => (
                                        <div 
                                            key={idx}
                                            draggable="true"
                                            onDragStart={(e) => handleTransDragStart(e, word, 'pool', idx)}
                                            onClick={() => handleTransClick(word, 'pool', idx)}
                                            className="bg-gray-800 hover:bg-gray-700 text-cyan-400 border border-gray-700 px-4 py-2 rounded-lg font-semibold transition-all hover:scale-105 cursor-grab active:cursor-grabbing"
                                        >
                                            {word}
                                        </div>
                                    ))}
                                </div>

                                {transFeedback && (
                                    <div className="animate-pop">
                                        <div className="text-2xl font-bold text-lime-400 mb-4">{transFeedback}</div>
                                        <button 
                                            onClick={() => {
                                                if(transIndex < TRANSLATION_EXERCISES.length -1) setTransIndex(prev => prev + 1);
                                                else setTransIndex(0);
                                            }}
                                            className="bg-lime-500 text-black font-bold py-2 px-6 rounded-full hover:bg-lime-400"
                                        >
                                            Next Exercise &rarr;
                                        </button>
                                    </div>
                                )}
                            </div>
                        )}

                        {/* --- TAB 5: SITUATIONS --- */}
                        {activeTab === 'situations' && (
                            <div className="animate-fadeIn max-w-2xl mx-auto">
                                <div className="text-center mb-8">
                                    <span className="text-lime-500 font-bold text-xs uppercase bg-lime-900/20 px-3 py-1 rounded-full">Scenario {sitIndex + 1}/5</span>
                                </div>

                                <div className="bg-gray-800 p-8 rounded-2xl border border-gray-700 shadow-2xl">
                                    <div className="mb-6 p-4 bg-gray-900/50 rounded-lg border-l-4 border-lime-500">
                                        <p className="text-gray-300 italic">{SITUATION_EXERCISES[sitIndex].context}</p>
                                    </div>

                                    <p className="text-2xl font-bold text-center mb-8 leading-relaxed">
                                        {SITUATION_EXERCISES[sitIndex].sentence.split("_____")[0]}
                                        <span className="inline-block w-32 border-b-2 border-lime-500 mx-2 text-lime-400 text-center">?</span>
                                        {SITUATION_EXERCISES[sitIndex].sentence.split("_____")[1]}
                                    </p>

                                    <div className="grid grid-cols-1 sm:grid-cols-3 gap-4">
                                        {SITUATION_EXERCISES[sitIndex].options.map((opt, idx) => (
                                            <button
                                                key={idx}
                                                onClick={() => handleSituationChoice(opt)}
                                                className="bg-gray-700 hover:bg-lime-600 hover:text-black text-white font-bold py-4 rounded-xl transition-all transform hover:scale-105"
                                            >
                                                {opt}
                                            </button>
                                        ))}
                                    </div>
                                </div>

                                {sitFeedback && (
                                    <div className={`mt-8 text-center text-xl font-bold animate-pop ${sitFeedback.includes('CORRECT') ? 'text-lime-400' : 'text-red-400'}`}>
                                        {sitFeedback}
                                    </div>
                                )}
                            </div>
                        )}

                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
